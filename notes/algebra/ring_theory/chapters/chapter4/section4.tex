\section{Direct Sums of Modules and Free Modules}

\begin{definition}
  Let $M$ be an  $R$-modules, and  $N_1, \dots, N_k$ be submodules of
  $M$. The  \textbf{sum} of $N_1, \dots, N_k$ is defined to be the set
  \begin{equation*}
    N_1+N_2+\dots+N_k=
    \{ a_1+a_2+\dots+a_k : a_i \in N_i \}
  \end{equation*}
  We also write the sum as $\sum_{i=1}^k{N_i}$.
  We also define, for any set $A \subseteq M$ (not necessarily a
  submodule)
  \begin{equation*}
    RA=
    \{ r_1a_1+\dots+r_na_n+\dots : r_i \in R \text{ and } a_i \in A \}
  \end{equation*}
  and call it the \textbf{module generated} by $A$. We call  $A$ the
  \textbf{generating set} of $RA$.
\end{definition}

\begin{definition}
  A submodule $N$ of an  $R$-module  $M$ is said to be
  \textbf{finitely generated} if there is some finite set $A \subseteq
  M$ for which $N=RA$. We call $N$ \textbf{cyclic} if $N=Ra$ for some
  $a \in M$.
\end{definition}

\begin{lemma}\label{lemma_4.4.1}
  Let $M$ be an  $R$-module and  $A \subseteq M$. Then $RA$ is a
  submodile of  $M$. Moreover, if  $R$ has identity, then  $RA$ is the
  smallest submodoule of  $M$ containing  $A$.
\end{lemma}
\begin{proof}
  The first part follows from the submodule criterion. Now, let $R$
  have  $1$. Then by definition, $A \subseteq RA$, since $RA$
  contains all formal sums of the form  $1a+r_20+\dots+r_n0+\dots=a$.
  Now suppose there is a submodule $N$ of  $M$ for which  $A \subseteq
  N \subseteq RA$. Observe that $a=1a+r_20+\dots+r_n0+\dots \in RA$.
  Since $N$ contains $A$, $a \in N$, so that $RA \subseteq N$ and
  minimality is established.
\end{proof}

\begin{definition}
  Let $M$ be an $R$-module. We call a set $A \subseteq M$ of $|A|=d$ a
  \textbf{minimal generating set} if no finite set of size smaller
  than $d$ generates the submodule $RA$.
\end{definition}

\begin{example}\label{example_4.4}
  \begin{enumerate}
    \item[(1)] Let $M$ by any $\Z$-module, and  $a \in M$. Then the
      cyclic submodule $\Z{a}$ of $M$ is just the cyclic subgroup
      $\langle a \rangle$ of $M$ generated by  $a$. In fact, $M$ is
      finitely generated as a  $\Z$-module if, and only if  $M$ is
      finitely generated as an Abelian group. That is, there exists
      a 1--1 correspondence between finitely generated submodules and
      finitely generated Abelian groups.

    \item[(2)] Let $R$ be a ring with identity, and consider $R$
      itself as a left $R$-module. Then observe $R=R1$, so that $R$ is
      cyclic. Indeed, if  $I \subseteq R$ is an ideal of $R$, which is
      also a cyclic submodule of  $R$, then  $I=Ra$ for some  $a \in
      R$. That is, $I=(a)$ so $I$ is a principle ideal. Indeed, there
      is a 1--1 correspondence between cyclic submodules of $R$ as an
      $R$-module and principle ideals of $R$ as a ring; so $R$ is a
      principle ideal domain if every submodule is cyclic.

    \item[(3)] Let $k$ be a field, and consider the polynomial ring
      $R=k[x_1, \dots, x_n, \dots]$ in infinitely many variables. Then
      the set $\{x_1, \dots, x_n, \dots \}$ is a generating set for
      the submodule $R\{x_1, \dots, x_n, \dots\}$. Observe, that this
      submodule cannot be finitely generated.

    \item[(4)] Let $R$ be a ring with identity, and consider the free
     module $R^n$ of rank $n$. Let  $e_i=(0, \dots, 0,1,0, \dots, 0)$
     with $1$ in the $i$-th entry. Then for any $(s_1, \dots, s_n) \in
     R^n$, observe
     \begin{equation*}
       (s_1, \dots, s_n)=\sum_{i=1}^n{s_ie_i}
     \end{equation*}
     so $R^n$ is finitely generated by the set $\{e_1, \dots, e_n\}$.
     Observe, that if $R=k$ is a field, then $R^n=\A^n(k)$ affine
     $n$-space, and the set $\{e_1, \dots, e_n\}$ is the standard
     basis for $\A^n(k)$. If $R$ is just any commutative ring, then
     $\{e_1, \dots, e_n\}$ is a minimal generating set.

   \item[(5)] Let $k$ be a field, and  $V$ a vector space, and let
     $T:V \xrightarrow{} V$ a linear transformation. Make $V$ into a
     $k[x]$-module via $T$. Then  $V$ is a cyclic  $k[x]$-module with
     generator $v$ if, and only if  $V=\{p(x)v : p(x) \in k[x] \}$.
     That is, if, and only if every element of $V$ is a linear
     combination of elements of the set $\{v, Tv, \dots, T^nv, \dots
     \}$; if, and only if the set $\{v,Tv, \dots, T^nv, \dots \}$ span
     $V$ as a vector space over  $k$.

     Now, take
     \begin{aligned}
       T: V & \xrightarrow{} V \\
          v & \xrightarrow{} v
     \end{aligned}
     or
     \begin{aligned}
       T: V & \xrightarrow{} V \\
          v & \xrightarrow{} 0
     \end{aligned}
     Then for every $v \in V$, and for every $p(x) \in k[x]$,
     $p(x)=\a{v}$ for some $\a \in k$. So if $\dim_k{V}=1$, then $V$
     cannot be generated as a cyclic $k[x]$-module.

   \item[(6)] Let $k$ be a field, and  $\A^n(k)$ be affine $n$-space.
     Let  $T:\A^n(k) \xrightarrow{} \A^n(k)$ be the shift operator and
     $e_i$ the $i$-th basis vector. Then $\A^n(k)$ is spanned by the
     set $\{e_n, Te_n, \dots, T^{n-1}e_n\}$. So $\A^n(k)$ is a cyclic
     $k[x]$-module with generator $e_n$. Indeed, if  $n>1$, then
     $\A^n(k)$ failes to be a cyclci $k$-module.
  \end{enumerate}
\end{example}

\begin{definition}
  Let $M_1, \dots, M_k$ be $R$-modules. We define the \textbf{direct
  product}, or \textbf{external direct sum} of $M_1, \dots, M_k$
  to be
  \begin{equation*}
    M_1 \times \dots \times M_k =
    \{ (m_1, \dots, m_k) : m_i \in M_i \}
  \end{equation*}
  We also write the external direct sum as $\prod_{i=1}^n{M_i}$.
\end{definition}

\begin{lemma}\label{lemma_4.4.2}
  Let $M_1, \dots, M_k$ be $R$-modules. Then the external direct sum
  $M_1 \times \dots \times M_k$ is an $R$-module under component wise
  addition of each $M_i$ and under the action
  \begin{align*}
    R \times \prod_{i=1}^k{M_i} & \xrightarrow{} \prod_{i=1}^k{M_i} \\
    (r, (m_1, \dots, m_k)) & \xrightarrow{} r(m_1, \dots, m_k)=(rm_1,
                                                    \dots, rm_k)  \\
  \end{align*}
  where the underlying action is the action $R \times M_i
  \xrightarrow{} M_i$.
\end{lemma}

\begin{proposition}\label{proposition_4.4.3}
  Let $N_1, \dots, N_k$ be submodules of an $R$-module $M$. The
  following conditions are equivalent:
  \begin{enumerate}
    \item[(1)] The map
      \begin{align*}
        \pi: N_1 \times \dots N_k & \xrightarrow{} N_1+\dots+N_k  \\
          (a_1, \dots, a_n)       & \xrightarrow{} a_1+\dots+a_n  \\
      \end{align*}
      is an $R$-module isomorphism making $N_1 \times \dots N_k \simeq
      N_1+\dots+N_k$.

    \item[(2)] For any $1 \leq j \leq k$, $N_j \cap
      (N_1+\dots+N_{j-1}+N_{j+1}+\dots+N_k)=(0)$

    \item[(3)] For every $x \in N_1+\dots+N_k$, $x$ can be uniquely
      written as a formal sum of elements of each  $N_i$; that is:
      \begin{equaion*}
        x=a_1+\dots+a_n \text{ where } a_i \in N_i
      \end{equaion*}
  \end{enumerate}
\end{proposition}
\begin{proof}
  Fix $1 \leq j \leq k$, and define
  $N=N_1+\dots+N_{j-1}+N_{j+1}+\dots+N_k$. Suppose that $\pi$ is an
  $R$-module isomorphism but that  $N_j \cap N \neq (0)$. Choose $a_j
  \neq 0$ in this intersection, then we have
  \begin{equation*}
    a_j=a_1+\dots+a_{j-1}+a_{j+1}+\dots+a_k
  \end{equation*}
  so that $(a_1, \dots, a_{j-1},-a_j,a_{j+1}, \dots, a_k) \in
  \ker{\pi}$. But $(a_1, \dots, a_{j-1},-a_j,a_{j+1}, \dots, a_k) \neq
  0$, which contradicts that $\pi$ is an isomorphism. Therefore, no
  such  $a_j$ can exist.

  Now, suppose that $N_j \cap N=(0)$ for any $1 \leq j \leq k$. Suppose
  that for $a_i,b_i \in N_i$: $a_1+\dots+a_k=b_1+\dots+b_k$. Fix $j$,
  Observe that:
  \begin{equation*}
    b_j-a_j=(b_1-a_1)+\dots+(b_{j-1}-a_{j-1})+(b_{j+1}-a_{j+1})+\dots+(b_k-a_k)
    =0
  \end{equation*}
  so that $a_j=b_j$.

  Finally, suppose that every element of $N_1+\dots+N_k$ can be
  written uniquely as a formal sum of elements of each $N_i$.
  Observe that  $\im{\pi}=N_1+\dots+N_k$, so that $\pi$ is onto. By
  the above hypothesis, we also get $\ker{\pi}=(0)$.
\end{proof}

\begin{definition}
  If $N_1, \dots, N_k$ are submodules of an $R$-module  $M$, we call
  $M$ the  \textbf{internal direct sum} of $N_1, \dots, N_k$ if
  $M=N_1+\dots+N_k$ and $M \simeq N_1 \dots N_k$ via the $R$-module
  homomorphism
  \begin{align*}
    \pi: N_1 \times \dots N_k & \xrightarrow{} N_1+\dots+N_k  \\
    (a_1, \dots, a_n)       & \xrightarrow{} a_1+\dots+a_n  \\
  \end{align*}
  and we write $M=N_1 \oplus \dots \oplus N_k$, or
  $M=\bigoplus_{i=1}^k{N_i}$.
\end{definition}

\begin{definition}
  An $R$-module  $F$ is a called \textbf{free} on a subset $A
  \subseteq F$ if for every nonzero $x \in F$, there exist unique
  nonzero $r_1, \dots, r_n \in R$ and $a_1, \dots, a_n \in A$ such
  that
  \begin{equation*}
    x=r_1a_1+\dots+r_na_n
  \end{equation*}
  that is, every element of $F$ can be written as a unique formal sum
  of unique representatives of elements of $R$ and elements of $A$. If
  $A$ is finite, we define the \textbf{rank} of $F$ to be
  $\rank{F}=|A|$.
\end{definition}

\begin{example}\label{example_4.5}
  The module $\faktor{\Z}{2\Z} \oplus \faktor{\Z}{2\Z}$ is not a free
  module on the set $\{(1,0), (0,1)\}$. Observe for any $n \in
  \faktor{\Z}{2\Z} \oplus \faktor{\Z}{2\Z}$, that $n=n_1+n_2$ where
  $n_1,n_2 \in \faktor{\Z}{2\Z}$. However, notice that the
  representatives of $n_1$ and $n_2$ are not uniquely chosen. Observe:
  \begin{align*}
    n &=  n_1+n_2 \\
      &=  3n_1+5n_2 \\
      &=  5n_1+3n_2 \\
      &=  n_1+3n_2 \\
      &=  n_1+5n_2 \\
      &=  3n_1+n_2 \\
      &=  5n_1+n_2 \\
  \end{align*}
  In fact $\faktor{\Z}{2\Z} \oplus \faktor{\Z}{2\Z}$ is not free on
  any set of generators.
\end{example}

\begin{theorem}[The Universal Property on Free Modules]\label{theorem_4.4.4}
  Let $R$ be a ring, and  $A$ be any set. Then there exists a free
  $R$-module $F(A)$ on $A$ such that if  $M$ is any  $R$-module, and
  $\phi:A \xrightarrow{} M$ is any morphism of sets, then there exists
  a unique $R$-module homomorphism $\Phi:F(A) \xrightarrow{} M$ such
  that $\Phi$ restricts to $\phi$ on $A$, so that the following
  diagram commutes:
  \[\begin{tikzcd}
    A & {F(A)} \\
      & M
      \arrow["\iota", from=1-1, to=1-2]
      \arrow["\phi"', from=1-1, to=2-2]
      \arrow["\Phi", from=1-2, to=2-2]
  \end{tikzcd}\]
  where $\i:a \xrightarrow{} a$ is the inclusion map.
\end{theorem}
\begin{proof}
  Define $F(A)=(0)$ if $A$ is the emptyset. Otherwise, if $A$ is
  non-empty, then define $F(A)$ to be the collection of all set
  functions $f:A \xrightarrow{} R$ such that $f(a)=0$ for all but
  finitely many $a \in A$. Define $+$ on $F(A)$ by function addition,
  and define the action $R \times F(A) \xrightarrow{} F(A)$ by
  \begin{equation*}
    (rf)(a)=r(f(a))
  \end{equation*}
  Then $F(A)$ is made into an $R$-module. Now, identify, by inclusion,
  $A \subseteq F(A)$ by the map
  \begin{equation*}
    a \xrightarrow{} f_a(x)=
    \begin{cases}
      1, \text{ if } x=a  \\
      0, \text{ if } x \neq a \\
    \end{cases}
  \end{equation*}
  Now, identify each $f \in F(A)$ with the formal sum
  $r_1a_1+\dots+r_na_n$ by
  \begin{equation*}
    f(x)=
    \begin{cases}
      r_i, \text{ if } x=a_i  \\
      0 , \text{ if } x \neq a_i  \\
    \end{cases}
  \end{equation*}
  Then $F(A)$ is identified with the set of all $R$-linear
  combinations on $A$. Moreover, each element of $F(A)$ has a unique
  representation as a formal sum. Indeed, let $x \in F(A)$ be
  associated with the formal sum $x=r_1a_1+\dots+r_na_n$, and suppose
  there exist $s_1, \dots, s_n \in R$ for which
  $x=s_1a_1+\dots+s_na_n$. Then by identification, we have
  $f(a_i)=r_i$ and that $f(a_i)=s_i$. Then $f(a_i)-f(a_i)=r_i-s_i=0$
  so we have $r_i=s_i$. Therefore, this makes $F(A)$ a free $R$-module
  on  $A$.

  Now, let  $\phi:A \xrightarrow{} M$ be any morphism of sets, and
  define
  \begin{align*}
    \Phi: F(A) & \xrightarrow{} M \\
          r_1a_1+\dots+r_na_n & \xrightarrow{} r_1\phi(a_1)+\dots+r_n\phi(a_n) \\
  \end{align*}
  by the uniqueness of representation of the elements of $F(A)$
  identified as formal sums, $\Phi$ is well defined, and that
  $\Phi=\phi$ on $A$.  Now, let $\Psi:F(A) \xrightarrow{} M$ an
  $R$-module homomorphism extending $\phi$, taking $x=s_1a_1+\dots+s_na_n \xrightarrow{}
  s_1\phi(a_1)+\dots+s_n\phi(a_n)$. Then $\Psi=\phi$ when restricted
  to $A$ so $\Psi=\Phi$ on $A$. Now, since $A$ generates $F(A)$ as a
  free module, let $x \in F(A)$ such that
  $\Phi(x)=r_1\phi(a_1)+\dots+r_n\phi(a_n)$ and
  $\Psi(x)=s_1\phi(a_1)+\dots+s_n\phi(a_n)$. Then
  $\Phi-\Psi(x)=(r_1-s_1)\phi(a_1)+\dots+(r_n-s_n)\phi(a_n)$. By
  definition of $\Phi$ and  $\Psi$, we have the preimage of $x$ under
  $\Phi-\Psi$ is $x=(r_1-s_1)a_1+\dots+(r_n-s_n)a_n$ in $F(A)$. Since
  $F(A)$ is free, then $r_i-s_i=0$, so $r_i-s_i$ for all $1 \leq i
  \leq n$, and $\Phi-\Psi(x)=\Phi(x)-\Psi(x)=0$. That is
  $\Phi(x)=\Psi(x)$ and $\Phi$ is the unique extension of $\phi$ from
  $A$ to  $F(A)$.
\end{proof}
\begin{corollary}
if $A=\{a_1, \dots, a_n\}$, then $F(A)$ is of rank $n$, and
  \begin{equation*}
    F(A)=Ra_1 \oplus \dots \oplus Ra_n
  \end{equation*}
  Moreover, $F(A) \simeq R^n$.
\end{corollary}
\begin{proof}
  By proposition \ref{proposition_4.4.3}, we get that $F(A)=Ra_1
  \oplus \dots \oplus Ra_n$. Now, observe that $Ra_i \simeq R$ for all
  $1 \leq i \leq n$ via the $R$-module isomorphism  $r \xrightarrow{}
  ra_i$, and by definition $R^n=\bigoplus_{i=1}^n{R}$.
\end{proof}
\begin{corollary}
  The following are true:
  \begin{enumerate}
    \item[(1)] If $F_1$ and $F_2$ are free $R$-modules on a set  $A$,
      there exists a unique  $R$-module isomorphism $\phi:F_1
      \xrightarrow{} F_2$ restricting to the identity on $A$.

    \item[(2)] If $F$ is a free module on $R$ with basis $A$, then  $F
      \simeq F(A)$.
  \end{enumerate}
\end{corollary}

\begin{definition}
  Let $A$ be any set. We call a free $\Z$-module on $A$ the
  \textbf{free Abelian group} on $A$. If  $A$ is a finite set of  $n$
  elements, define the free Abelian group on $A$ to be of
  \textbf{rank} $n$.
\end{definition}
